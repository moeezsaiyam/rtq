<% if logged_in? && current_user.roles.first.name == "Admin" %>
<h1>Sign up as a new user</h1>

<% @user.password = @user.password_confirmation = nil %>

 <% form_for @user  do |f| -%>

    <% if @user.errors.any? %>
      <%= stylesheet_link_tag 'conditional' %>
    <% end %>
    <div class = "error-box">
      <% if @user.errors.any? %>
        <h1 class = "error-heading"> <%=@user.errors.count %>  <%=display_errors(@user) %>  has been occured: </h1>
        <h2 class = "error-heading">Unable to sign-up.</h2>
        <% @user.errors.full_messages.each do |message| %>
          <li class = "error"><%= message %> </li>
        <% end %>
      <% end %>
    </div>
    <p><%= f.label :login %>
    <div class="clear"></div>
    <%= f.text_field :login %></p>

    <p><%= f.label :email %><br/>
    <%= f.text_field :email %></p>
    <div class="clear"></div>

    <p><%= f.label :password %><br/>
    <%= f.password_field :password %></p>

    <p><%= f.label :password_confirmation, 'Confirm Password' %>
    <div class="clear"></div>
    <%= f.password_field :password_confirmation %></p>

    <p><%= f.label :role, "User Role" %>
    <div class="clear"></div>
    <%= select("user", "role", options_for_select(["Admin","SubAdmin"])) %> </p>

    <p><%= submit_tag 'Sign up' %></p>
  <% end -%>
<% else %>
     <%= stylesheet_link_tag 'conditional' %>
    <div class = "error-box">
    <h1 class = "error-heading">Your are not allowed to add new user.</h1>
    <h2 class = "error-heading">login as admin click here.</h2>
    <%= link_to "login here", login_path %>
<% end %>

